{% extends "admin_app/base.html" %}
{% load static %}

{% block title %}Edit {{ template.name }}{% endblock %}
{% block navbar_title %}Edit · {{ template.name }}{% endblock %}

{% block content %}
<div style="margin-bottom: 24px;">
    <a href="{% url 'admin_template_detail' template.pk %}" style="font-size: 14px; color: var(--admin-text-muted); text-decoration: none;">← Back to template</a>
</div>

<div class="admin-card" style="background: var(--admin-surface); border: 1px solid var(--admin-border); border-radius: 14px; padding: 28px; max-width: 520px;">
    <h1 style="font-size: 20px; font-weight: 600; color: var(--admin-text); margin-bottom: 24px;">Edit template</h1>

    <form method="post" action="{% url 'admin_template_edit' template.pk %}">
        {% csrf_token %}
        <div class="admin-form-fields" style="display: flex; flex-direction: column; gap: 18px;">
            <div>
                <label for="id_name" style="display: block; font-size: 13px; font-weight: 500; color: var(--admin-text-secondary); margin-bottom: 6px;">Name</label>
                <input type="text" name="name" id="id_name" value="{{ form.name.value|default:template.name }}" maxlength="255" required style="
                    width: 100%; padding: 12px 16px; font-size: 14px; font-family: inherit; color: var(--admin-text); background: var(--admin-bg);
                    border: 1px solid var(--admin-border); border-radius: 10px; outline: none;
                ">
                {% if form.name.errors %}<ul style="list-style: none; font-size: 13px; color: var(--admin-danger); margin-top: 6px;">{% for err in form.name.errors %}<li>{{ err }}</li>{% endfor %}</ul>{% endif %}
            </div>
            <div>
                <label for="id_description" style="display: block; font-size: 13px; font-weight: 500; color: var(--admin-text-secondary); margin-bottom: 6px;">Description</label>
                <textarea name="description" id="id_description" rows="4" style="
                    width: 100%; padding: 12px 16px; font-size: 14px; font-family: inherit; color: var(--admin-text); background: var(--admin-bg);
                    border: 1px solid var(--admin-border); border-radius: 10px; outline: none; resize: vertical;
                ">{{ form.description.value|default:template.description }}</textarea>
                {% if form.description.errors %}<ul style="list-style: none; font-size: 13px; color: var(--admin-danger); margin-top: 6px;">{% for err in form.description.errors %}<li>{{ err }}</li>{% endfor %}</ul>{% endif %}
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" name="published" id="id_published" {% if form.published.value|default:template.published %}checked{% endif %} style="width: 18px; height: 18px; accent-color: var(--admin-accent);">
                <label for="id_published" style="font-size: 14px; color: var(--admin-text-secondary);">Published</label>
            </div>
            {% if form.published.errors %}<ul style="list-style: none; font-size: 13px; color: var(--admin-danger);">{% for err in form.published.errors %}<li>{{ err }}</li>{% endfor %}</ul>{% endif %}
        </div>
        <div style="margin-top: 24px; display: flex; gap: 12px;">
            <button type="submit" style="
                padding: 12px 24px; font-size: 14px; font-weight: 600; font-family: inherit; color: #0c1220;
                background: linear-gradient(135deg, var(--admin-accent), #d97706); border: none; border-radius: 10px; cursor: pointer;
            ">Save changes</button>
            <a href="{% url 'admin_template_detail' template.pk %}" style="padding: 12px 24px; font-size: 14px; font-weight: 500; font-family: inherit; color: var(--admin-text-secondary); text-decoration: none; border: 1px solid var(--admin-border); border-radius: 10px;">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
